/*!
 * Mochi v2.0.1 (https://github.com/codeworksdev/mochi-2.0)
 * Copyright (c) 2014-2024 CODEWORKS <support@codeworksnyc.com>
 * Licensed under the MIT license
 */ function Mochi(){this._options(),this._before(),this._vars(),this._observe(),this._html(),this._fa(),this._body(),this._init()}$(document).ready(function(){window.$m=new Mochi,$m.do(["mochi_load","mochi_load_page","mochi_load_page"+Number($m.getPage()),"mochi_load_view","mochi_load_view"+Number($m.getView()),"mochi_last",])}),Mochi.prototype={_options:function(){var t={CLICK_NAME:"auto",DEBUG_MODE:!1,ENABLE_SERVICE_WORKER:!1,LAZY_LOAD_PLUGINS:[],SW_UPDATE_NOTIFICATIONS:!0,SW_UPDATE_NOTIFICATIONS_OPTIONS:{buttonTitle:"Update Available",dialogButtonTitle:"Update Now",dialogContent:"<p>Good news! A new software update is available for your app. We recommend updating now, but if you'd like, you can hit cancel and manually refresh later.</p>",dialogTitle:"Software Update"},SW_VERBOSE_SYNCING:!0,SW_VERBOSE_SYNCING_OPTIONS:{text:"SYNCING",icon:"fa-cog",spin:!0}};this.default=JSON.parse(JSON.stringify(t)),this.options=JSON.parse(JSON.stringify(t))},_before:function(){this.do("mochi_before")},_vars:function(){this.__body=$("body"),this.__container=this.__body.find("#container"),this.__content=this.__body.find("#content"),this.__head=$("head"),this.__href=window.location.href,this.__html=$("html"),this.__observer=new MutationObserver(function(t){t.forEach($m._onMutation,$m)}),this.__page_name=/[\\\/]([^\\\\/\?]+)(\?.*)?$/.test(this.__href)?RegExp.$1.replace(/\.[^\.]+$/,""):"index"},_observe:function(){this.__observer.observe(this.__html[0],{attributes:!0,childList:!0,characterData:!0,subtree:!0})},_html:function(){var t=this.__html,i=t.attr("data-page"),e=t.attr("data-view"),n=RegExp(/^\d+(\.\d+)?$/);n.test(i)||t.attr("data-page",0),n.test(e)||t.attr("data-view",0)},_fa:function(){var t=this.__html,i="fontawesome-i2svg-active";t.hasClass(i)||t.addClass(i.replace(/-\w+$/,"-no-icons-found"))},_body:function(){this.__html.addClass("is-page-"+this.sanitizeTitle(this.__page_name))},_init:function(){this.do("mochi_init"),this.__html.attr("manifest")&&(!0===this.getOption("SW_VERBOSE_SYNCING")&&(window.applicationCache.addEventListener("downloading",function(){setTimeout(function(){$m.widgetOnDownloading()},500)}),window.applicationCache.addEventListener("cached",function(){setTimeout(function(){$("#mochiAlertDownloading-container .alert").alert("close")},3e3)})),!0===this.getOption("SW_UPDATE_NOTIFICATIONS")&&window.applicationCache.addEventListener("updateready",function(){setTimeout(function(){setTimeout(function(){$("#mochiAlertDownloading-container .alert").alert("close")},3e3),$m.widgetOnUpdateReady()},500)})),this.options.ENABLE_SERVICE_WORKER&&"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(t=>{console.log("ServiceWorker registration successful with scope: "+t.scope),t.addEventListener("updatefound",()=>{if(t.active){let i=t.installing;i.addEventListener("statechange",()=>{"activated"===i.state&&!0===$m.getOption("SW_UPDATE_NOTIFICATIONS")&&$m.widgetOnUpdateReady()})}else{let e=t.installing;!0===$m.getOption("SW_VERBOSE_SYNCING")&&$m.widgetOnDownloading(),e.addEventListener("statechange",()=>{"activated"===e.state&&setTimeout(function(){$("#mochiAlertDownloading-container .alert").alert("close")},1e3)})}})}).catch(function(t){console.error("ServiceWorker registration failed: "+t)}),this.options.LAZY_LOAD_PLUGINS&&_.isArray(this.options.LAZY_LOAD_PLUGINS)&&this.options.LAZY_LOAD_PLUGINS.length&&_.each(this.options.LAZY_LOAD_PLUGINS,function(t){$.getScript("mochi/js/plugins/"+t+"/dist/"+t+".min.js")},this)},_onMutation:function(t){window.mochi_onmutation&&_.isFunction(window.mochi_onmutation)&&(this.log("hook: mochi_onmutation("+t.constructor.name+")"),mochi_onmutation(t))},do:function(f,a){return _.isArray(f)?_.each(f,function(t){this.instance.do(t,this.args)},{instance:this,args:a}):f&&"string"==typeof f&&/^[a-zA-Z_\$][\w\$]*$/.test(f)&&window[f]&&_.isFunction(window[f])&&(this.log("hook: "+f+".apply(Mochi, "+JSON.stringify(a)+")"),eval('window["'+f+'"].apply(this, a)')),this},extend:function(k,c,m,f){if(k&&"string"==typeof k&&/^[a-z]\w*$/i.test(k)){var r=["__body","__container","__content","__head","__href","__html","__observer","__page_name","_before","_body","_fa","_html","_init","_observe","_onMutation","_options","_vars","default","do","extend","getDefaultOption","getOnClickName","getOption","getPage","getState","getView","isSimpleObj","load","loadPage","loadView","log","onClick","options","sanitizeTitle","setOnClickName","setOption","setPage","setState","setView","unload","unloadPage","unloadView","widgetOnDownloading","widgetOnUpdateReady",];if(-1==$.inArray(k,r)&&!_.has(this,k)&&_.isFunction(c)){var meta=m&&this.isSimpleObj(m)?JSON.parse(JSON.stringify(m)):{},func=m&&_.isFunction(m)?m:f,json=JSON.stringify(meta);return this.log("extend: $m."+k+" = new "+c.name+"("+json+")"),eval("this[k]=new c(meta)"),func&&_.isFunction(func)&&func.apply(this[k],meta),this}}throw new MochiError('Cannot extend as "'+k+'". Name reserved, unsupported, or already defined.')},getDefaultOption:function(t){return this.getOption(t,!0)},getOnClickName:function(){var t=this.getOption("CLICK_NAME");return"auto"==t?this.__html.hasClass("no-touchevents")?"click":"touchstart":t},getOption:function(t,i){if(t&&"string"==typeof t){var e=this[i?"default":"options"];if(_.has(e,t)){var n=_.isFunction(e[t])?e[t].call(this):e[t];return this.isSimpleObj(n)?JSON.parse(JSON.stringify(n)):n}}},getPage:function(t){return this.getState("page",t)},getState:function(t,i){if(t&&"string"==typeof t&&/^page|view$/i.test(t)){var e=this.__html.attr("data-"+t.toLowerCase());return window.s.pad(e&&/^\d+(\.\d+)?$/.test(e)?Number(e):0,i&&/^\d+$/.test(i)?Number(i):0,"0")}},getView:function(t){return this.getState("view",t)},isSimpleObj:function(t){if(t&&_.isObject(t)&&!_.isArray(t)&&!_.isFunction(t))return!0},load:function(t,i,e){if(t&&"string"==typeof t&&/^page|view$/i.test(t)&&/^\d+(\.\d+)?$/.test(i)){var t=t.toLowerCase(),i=Number(i),n="mochi_load_"+t+i.toString().replace(/\D/g,"_"),o=[_.defaults(this.isSimpleObj(e)?e:{},{caller:null,newStateNumber:i,oldStateNumber:i,stateName:t})];this.do(["mochi_load","mochi_load_"+t,n,"mochi_onchange",],o)}return this},loadPage:function(t,i){return this.load("page",t,i)},loadView:function(t,i){return this.load("view",t,i)},log:function(t,i){return(i||!0===this.getOption("DEBUG_MODE"))&&console.info(t),this},onClick:function(t,i,e){var n,o=this.getOnClickName(),a=_.isFunction(i),s=a?{}:i,r=a?i:e;return(n="string"==typeof t?$(t):_.isElement(t)?$(t):t).on(o,s,!!_.isFunction(r)&&r)},sanitizeTitle:function(t,i,e){try{var n=arguments.length>1&&/^string|number$/.test(typeof i)?i.toString():"-",o="("+n.replace(/([\.\(\)\$\^\*\+\-\?\|\{\}\[\]\\])/g,"\\$1")+")",a=RegExp(o+"{2,}","g");if((t=t.toString().toLowerCase().replace(/[^a-z\d]/ig,n).replace(a,n).replace(RegExp("^"+o+"*|"+o+"*$","g"),"")).length)return t;return/^string|number$/.test(typeof e)?this.sanitizeTitle(e):""}catch(s){return""}},setOnClickName:function(t){return t&&"string"==typeof t&&/^\w+$/i.test(t)?this.setOption("CLICK_NAME",t):this},setOption:function(t,i){if(this.isSimpleObj(t))_.each(t,function(t,i){this.setOption(i,t)},this);else if(t&&"string"==typeof t&&_.has(this.options,t)){var e="option: "+t+" = "+JSON.stringify(i),n=_.clone(this.options[t]);"DEBUG_MODE"===t?i&&this.log(e,null,!0):this.log(e),this.isSimpleObj(n)?this.isSimpleObj(i)&&_.each(i,function(t,i){_.has(this,i)&&(this[i]=t)},this.options[t]):this.options[t]=i}return this},setPage:function(t,i){return this.setState("page",t,i)},setState:function(t,i,e){if(t&&"string"==typeof t&&/^page|view$/i.test(t)&&/^\d+(\.\d+)?$/.test(i)){var n=window.s.capitalize(t,!0),o=Number(this["get"+n]()),a=Number(i);if(a!=o){var s={caller:null,newStateNumber:a,oldStateNumber:o,stateName:n.toLowerCase()};this.__html.attr("data-"+n.toLowerCase(),a),this["unload"+n](o,_.extend(_.clone(s),{caller:"unload"+n})),this["load"+n](a,_.extend(_.clone(s),{caller:"load"+n})),e&&_.isFunction(e)&&e.call(this,_.extend(_.clone(s),{caller:e.constructor.name}))}}return this},setView:function(t,i){return this.setState("view",t,i)},unload:function(t,i,e){if(t&&"string"==typeof t&&/^page|view$/i.test(t)&&/^\d+(\.\d+)?$/.test(i)){var t=t.toLowerCase(),i=Number(i),n="mochi_unload_"+t+i.toString().replace(/\D/g,"_"),o=[_.defaults(this.isSimpleObj(e)?e:{},{caller:null,newStateNumber:i,oldStateNumber:i,stateName:t})];this.do(["mochi_unload","mochi_unload_"+t,n,"mochi_onchange",],o)}return this},unloadPage:function(t,i){return this.unload("page",t,i)},unloadView:function(t,i){return this.unload("view",t,i)},widgetOnDownloading:function(t,i,e){var n,o,a,s,r,l,d="mochiAlertDownloading";return this.__body.find("#"+d+"-container").length||(n=this.getOption("SW_VERBOSE_SYNCING_OPTIONS"),o=this.getDefaultOption("SW_VERBOSE_SYNCING_OPTIONS"),a=function(t){return/^string|number$/.test(typeof t)&&/\S/.test(t)},s=$.trim(a(t)?t:a(n.text)?n.text:o.text),r=$.trim(a(i)?i:a(n.icon)?n.icon:o.icon),l=Boolean(arguments.length<3?n.spin:e),this.__body.append('<div id="mochiAlertDownloading-container"><div class="alert alert-info alert-dismissible fade show" role="alert"><span class="small"><strong>'+s+'</strong>&nbsp;&nbsp;<i class="fas '+r+(l?"fa-spin":"")+'fa-lg"></i></span><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>'),$("#"+d+"-container .alert").on("closed.bs.alert",Function("$('#"+d+"-container').remove()"))),this},widgetOnUpdateReady:function(t,i,e,n){var o,a,s,r,l="mochiModalUpdateAvailable";return this.__body.find("#"+l+"-container").length||(o=this.getOption("SW_UPDATE_NOTIFICATIONS_OPTIONS"),a=this.getDefaultOption("SW_UPDATE_NOTIFICATIONS_OPTIONS"),s=function(t){return/^string|number$/.test(typeof t)&&/\S/.test(t)},(r={}).buttonTitle=$.trim(s(t)?t:s(o.buttonTitle)?o.buttonTitle:a.buttonTitle),r.dialogButtonTitle=$.trim(s(i)?i:s(o.dialogButtonTitle)?o.dialogButtonTitle:a.dialogButtonTitle),r.dialogContent=$.trim(s(e)?e:s(o.dialogContent)?o.dialogContent:a.dialogContent),r.dialogTitle=$.trim(s(n)?n:s(o.dialogTitle)?o.dialogTitle:a.dialogTitle),this.__body.append('<div id="'+l+'-container"><button type="button" class="btn btn-success" data-toggle="modal" data-target="#'+l+'">'+r.buttonTitle+'</button></div><div class="modal fade" id="'+l+'" tabindex="-1" role="dialog" aria-labelledby="'+l+'Label" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="'+l+'Label">'+r.dialogTitle+'</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body">'+r.dialogContent+'</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button><button type="button" class="btn btn-success" onclick="window.location.reload(true)">'+r.dialogButtonTitle+"</button></div></div></div></div>"),$("#"+l).on("hidden.bs.modal",Function("$('#"+l+"-container').remove();$(this).modal('dispose').remove()"))),this}};class MochiError extends Error{constructor(t){super(t),this.name="MochiError"}}
