/*!
 * Mochi v2.1.1 (https://github.com/codeworksdev/mochi-2.0)
 * Copyright (c) 2014-2026 CODEWORKS <support@codeworksnyc.com>
 * Licensed under the MIT license
 */
function Mochi(){this._options(),this._before(),this._vars(),this._observe(),this._html(),this._fa(),this._body(),this._init()}$(document).ready((function(){window.$m=new Mochi,$m.do(["mochi_load","mochi_load_page","mochi_load_page"+Number($m.getPage()),"mochi_load_view","mochi_load_view"+Number($m.getView()),"mochi_last"])})),Mochi.prototype={_options:function(){var t={CLICK_NAME:"auto",DEBUG_MODE:!1,ENABLE_SERVICE_WORKER:!1,LAZY_LOAD_PLUGINS:[],SW_UPDATE_NOTIFICATIONS:!0,SW_UPDATE_NOTIFICATIONS_OPTIONS:{buttonTitle:"Update Available",dialogButtonTitle:"Update Now",dialogContent:"<p>Good news! A new software update is available for your app. We recommend updating now, but if you'd like, you can hit cancel and manually refresh later.</p>",dialogTitle:"Software Update"},SW_VERBOSE_SYNCING:!0,SW_VERBOSE_SYNCING_OPTIONS:{text:"SYNCING",icon:"fa-cog",spin:!0}};this.default=JSON.parse(JSON.stringify(t)),this.options=JSON.parse(JSON.stringify(t))},_before:function(){this.do("mochi_before")},_vars:function(){this.__body=$("body"),this.__container=this.__body.find("#container"),this.__content=this.__body.find("#content"),this.__head=$("head"),this.__href=window.location.href,this.__html=$("html"),this.__observer=new MutationObserver((function(t){t.forEach($m._onMutation,$m)})),this.__page_name=/[\\\/]([^\\\\/\?]+)(\?.*)?$/.test(this.__href)?RegExp.$1.replace(/\.[^\.]+$/,""):"index"},_observe:function(){this.__observer.observe(this.__html[0],{attributes:!0,childList:!0,characterData:!0,subtree:!0})},_html:function(){var t=this.__html,e=t.attr("data-page"),i=t.attr("data-view"),n=new RegExp(/^\d+(\.\d+)?$/);n.test(e)||t.attr("data-page",0),n.test(i)||t.attr("data-view",0)},_fa:function(){var t=this.__html,e="fontawesome-i2svg-active";t.hasClass(e)||t.addClass(e.replace(/-\w+$/,"-no-icons-found"))},_body:function(){this.__html.addClass("is-page-"+this.sanitizeTitle(this.__page_name))},_init:function(){this.do("mochi_init"),this.__html.attr("manifest")&&(!0===this.getOption("SW_VERBOSE_SYNCING")&&(window.applicationCache.addEventListener("downloading",(function(){setTimeout((function(){$m.widgetOnDownloading()}),500)})),window.applicationCache.addEventListener("cached",(function(){setTimeout((function(){$("#mochiAlertDownloading-container .alert").alert("close")}),3e3)}))),!0===this.getOption("SW_UPDATE_NOTIFICATIONS")&&window.applicationCache.addEventListener("updateready",(function(){setTimeout((function(){setTimeout((function(){$("#mochiAlertDownloading-container .alert").alert("close")}),3e3),$m.widgetOnUpdateReady()}),500)}))),this.options.ENABLE_SERVICE_WORKER&&"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then((t=>{console.log("ServiceWorker registration successful with scope: "+t.scope),t.addEventListener("updatefound",(()=>{if(t.active){const e=t.installing;e.addEventListener("statechange",(()=>{if("activated"===e.state)!0===$m.getOption("SW_UPDATE_NOTIFICATIONS")&&$m.widgetOnUpdateReady()}))}else{const e=t.installing;!0===$m.getOption("SW_VERBOSE_SYNCING")&&$m.widgetOnDownloading(),e.addEventListener("statechange",(()=>{if("activated"===e.state)setTimeout((function(){$("#mochiAlertDownloading-container .alert").alert("close")}),1e3)}))}}))})).catch((function(t){console.error("ServiceWorker registration failed: "+t)})),this.options.LAZY_LOAD_PLUGINS&&_.isArray(this.options.LAZY_LOAD_PLUGINS)&&this.options.LAZY_LOAD_PLUGINS.length&&_.each(this.options.LAZY_LOAD_PLUGINS,(function(t){$.getScript("mochi/js/plugins/"+t+"/dist/"+t+".min.js")}),this)},_onMutation:function(t){window.mochi_onmutation&&_.isFunction(window.mochi_onmutation)&&(this.log("hook: mochi_onmutation("+t.constructor.name+")"),mochi_onmutation(t))},do:function(f,a){return _.isArray(f)?_.each(f,(function(t){this.instance.do(t,this.args)}),{instance:this,args:a}):f&&"string"==typeof f&&/^[a-zA-Z_\$][\w\$]*$/.test(f)&&window[f]&&_.isFunction(window[f])&&(this.log("hook: "+f+".apply(Mochi, "+JSON.stringify(a)+")"),eval('window["'+f+'"].apply(this, a)')),this},extend:function(k,c,m,f){if(k&&"string"==typeof k&&/^[a-z]\w*$/i.test(k)){var r=["__body","__container","__content","__head","__href","__html","__observer","__page_name","_before","_body","_fa","_html","_init","_observe","_onMutation","_options","_vars","default","do","extend","getDefaultOption","getOnClickName","getOption","getPage","getState","getView","isSimpleObj","load","loadPage","loadView","log","onClick","options","sanitizeTitle","setOnClickName","setOption","setPage","setState","setView","unload","unloadPage","unloadView","widgetOnDownloading","widgetOnUpdateReady"];if(-1==$.inArray(k,r)&&!_.has(this,k)&&_.isFunction(c)){var meta=m&&this.isSimpleObj(m)?JSON.parse(JSON.stringify(m)):{},func=m&&_.isFunction(m)?m:f,json=JSON.stringify(meta);return this.log("extend: $m."+k+" = new "+c.name+"("+json+")"),eval("this[k]=new c(meta)"),func&&_.isFunction(func)&&func.apply(this[k],meta),this}}throw new MochiError('Cannot extend as "'+k+'". Name reserved, unsupported, or already defined.')},getDefaultOption:function(t){return this.getOption(t,!0)},getOnClickName:function(){var t=this.getOption("CLICK_NAME");return"auto"==t?this.__html.hasClass("no-touchevents")?"click":"touchstart":t},getOption:function(t,e){if(t&&"string"==typeof t){var i=this[e?"default":"options"];if(_.has(i,t)){var n=_.isFunction(i[t])?i[t].call(this):i[t];return this.isSimpleObj(n)?JSON.parse(JSON.stringify(n)):n}}},getPage:function(t){return this.getState("page",t)},getState:function(t,e){if(t&&"string"==typeof t&&/^page|view$/i.test(t)){var i=this.__html.attr("data-"+t.toLowerCase());return window.s.pad(i&&/^\d+(\.\d+)?$/.test(i)?Number(i):0,e&&/^\d+$/.test(e)?Number(e):0,"0")}},getView:function(t){return this.getState("view",t)},isSimpleObj:function(t){if(t&&_.isObject(t)&&!_.isArray(t)&&!_.isFunction(t))return!0},load:function(t,e,i){if(t&&"string"==typeof t&&/^page|view$/i.test(t)&&/^\d+(\.\d+)?$/.test(e)){var n="mochi_load_"+(t=t.toLowerCase())+(e=Number(e)).toString().replace(/\D/g,"_"),o=[_.defaults(this.isSimpleObj(i)?i:{},{caller:null,newStateNumber:e,oldStateNumber:e,stateName:t})];this.do(["mochi_load","mochi_load_"+t,n,"mochi_onchange"],o)}return this},loadPage:function(t,e){return this.load("page",t,e)},loadView:function(t,e){return this.load("view",t,e)},log:function(t,e){return(e||!0===this.getOption("DEBUG_MODE"))&&console.info(t),this},onClick:function(t,e,i){var n,o=this.getOnClickName(),a=_.isFunction(e),s=a?{}:e,r=a?e:i;if("string"==typeof t)n=$(t);else n=_.isElement(t)?$(t):t;return n.on(o,s,!!_.isFunction(r)&&r)},sanitizeTitle:function(t,e,i){try{var n=arguments.length>1&&/^string|number$/.test(typeof e)?e.toString():"-",o="("+n.replace(/([\.\(\)\$\^\*\+\-\?\|\{\}\[\]\\])/g,"\\$1")+")",a=new RegExp(o+"{2,}","g");return(t=t.toString().toLowerCase().replace(/[^a-z\d]/gi,n).replace(a,n).replace(new RegExp("^"+o+"*|"+o+"*$","g"),"")).length?t:/^string|number$/.test(typeof i)?this.sanitizeTitle(i):""}catch(t){return""}},setOnClickName:function(t){return t&&"string"==typeof t&&/^\w+$/i.test(t)?this.setOption("CLICK_NAME",t):this},setOption:function(t,e){if(this.isSimpleObj(t))_.each(t,(function(t,e){this.setOption(e,t)}),this);else if(t&&"string"==typeof t&&_.has(this.options,t)){var i="option: "+t+" = "+JSON.stringify(e),n=_.clone(this.options[t]);if("DEBUG_MODE"===t)e&&this.log(i,null,!0);else this.log(i);this.isSimpleObj(n)?this.isSimpleObj(e)&&_.each(e,(function(t,e){_.has(this,e)&&(this[e]=t)}),this.options[t]):this.options[t]=e}return this},setPage:function(t,e){return this.setState("page",t,e)},setState:function(t,e,i){if(t&&"string"==typeof t&&/^page|view$/i.test(t)&&/^\d+(\.\d+)?$/.test(e)){var n=window.s.capitalize(t,!0),o=Number(this["get"+n]()),a=Number(e);if(a!=o){var s={caller:null,newStateNumber:a,oldStateNumber:o,stateName:n.toLowerCase()};this.__html.attr("data-"+n.toLowerCase(),a),this["unload"+n](o,_.extend(_.clone(s),{caller:"unload"+n})),this["load"+n](a,_.extend(_.clone(s),{caller:"load"+n})),i&&_.isFunction(i)&&i.call(this,_.extend(_.clone(s),{caller:i.constructor.name}))}}return this},setView:function(t,e){return this.setState("view",t,e)},unload:function(t,e,i){if(t&&"string"==typeof t&&/^page|view$/i.test(t)&&/^\d+(\.\d+)?$/.test(e)){var n="mochi_unload_"+(t=t.toLowerCase())+(e=Number(e)).toString().replace(/\D/g,"_"),o=[_.defaults(this.isSimpleObj(i)?i:{},{caller:null,newStateNumber:e,oldStateNumber:e,stateName:t})];this.do(["mochi_unload","mochi_unload_"+t,n,"mochi_onchange"],o)}return this},unloadPage:function(t,e){return this.unload("page",t,e)},unloadView:function(t,e){return this.unload("view",t,e)},widgetOnDownloading:function(t,e,i){var n,o,a,s,r,l,d="mochiAlertDownloading";return this.__body.find("#"+d+"-container").length||(n=this.getOption("SW_VERBOSE_SYNCING_OPTIONS"),o=this.getDefaultOption("SW_VERBOSE_SYNCING_OPTIONS"),s=((a=function(t){return/^string|number$/.test(typeof t)&&/\S/.test(t)})(t)?t:a(n.text)?n.text:o.text).trim(),r=(a(e)?e:a(n.icon)?n.icon:o.icon).trim(),l=Boolean(arguments.length<3?n.spin:i),this.__body.append('<div id="mochiAlertDownloading-container"><div class="alert alert-info alert-dismissible fade show" role="alert"><span class="small"><strong>'+s+'</strong>&nbsp;&nbsp;<i class="fas '+r+(l?"fa-spin":"")+'fa-lg"></i></span><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div></div>'),$("#"+d+"-container .alert").on("closed.bs.alert",new Function("$('#"+d+"-container').remove()"))),this},widgetOnUpdateReady:function(t,e,i,n){var o,a,s,r,l="mochiModalUpdateAvailable";return this.__body.find("#"+l+"-container").length||(o=this.getOption("SW_UPDATE_NOTIFICATIONS_OPTIONS"),a=this.getDefaultOption("SW_UPDATE_NOTIFICATIONS_OPTIONS"),s=function(t){return/^string|number$/.test(typeof t)&&/\S/.test(t)},(r={}).buttonTitle=(s(t)?t:s(o.buttonTitle)?o.buttonTitle:a.buttonTitle).trim(),r.dialogButtonTitle=(s(e)?e:s(o.dialogButtonTitle)?o.dialogButtonTitle:a.dialogButtonTitle).trim(),r.dialogContent=(s(i)?i:s(o.dialogContent)?o.dialogContent:a.dialogContent).trim(),r.dialogTitle=(s(n)?n:s(o.dialogTitle)?o.dialogTitle:a.dialogTitle).trim(),this.__body.append('<div id="'+l+'-container"><button type="button" class="btn btn-success" data-toggle="modal" data-target="#'+l+'">'+r.buttonTitle+'</button></div><div class="modal fade" id="'+l+'" tabindex="-1" role="dialog" aria-labelledby="'+l+'Label" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="'+l+'Label">'+r.dialogTitle+'</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body">'+r.dialogContent+'</div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button><button type="button" class="btn btn-success" onclick="window.location.reload(true)">'+r.dialogButtonTitle+"</button></div></div></div></div>"),$("#"+l).on("hidden.bs.modal",new Function("$('#"+l+"-container').remove();$(this).modal('dispose').remove()"))),this}};class MochiError extends Error{constructor(t){super(t),this.name="MochiError"}}
